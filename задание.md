# Тестовое задание для кандидатов-разработчиков


## Разработать сервис для работы с географическими объектами

### Стек: `Django`, `GeoDjango`, `Django Rest Framework`, БД `PostGIS`


#### 1. Описать в БД три модели
Сущность "Polygon" имеет атрибуты:
- Имя
- Поле геометрии (PolygonField)

Сущность "LineString" имеет атрибуты:
- Имя
- Поле геометрии (LineStringField)

Сущность "Point", связана с сущностью "Polygon" (многие ко многим), имеет атрибуты:
- Имя
- Поле геометрии (PointField)


#### 2. Для каждой сущности создать CRUD эндпоинты
формат входных данных
```json
{
   "name": "Точка 1",
   "geometry": {
      "type": "Point",
      "coordinates": [
         92.899501,
         58.34302
      ]
   }
}
```
формат выходных данных
```json
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [
      92.899501,
      58.34302
    ]
  },
  "properties": {
    "id": 1,
    "name": "Точка 1"
  }
}
```
- все эндпоинты должны иметь возможность фильтрации и поиска по полю "Имя"
- дополнительно для сущности "Point" должна быть возможность создания из списка.
Пример входных данных
```json
[
  {
    "name": "Точка 1",
    "geometry": {
      "type": "Point",
      "coordinates": [
        92.899501,
        58.34302
      ]
    }
  },
  {
    "name": "Точка 2",
    "geometry": {
      "type": "Point",
      "coordinates": [
        93.899501,
        59.34302
      ]
    }
  },
  ...
]
```
- дополнительно для сущности "Polygon" в выходных данных раскрывать список имен привязанных точек. 
При выборке не должно формироваться лишних запросов к БД
```json
{
  "type": "Feature",
  "geometry": {
    "type": "Polygon",
    "coordinates": [
      ...
    ]
  },
  "properties": {
    "id": 1,
    "name": "Полигон 1",
    "points": [
      "Точка 1",
      "Точка 2",
      ...
    ]
  }
}
```
- дополнительно для сущности "Polygon" возможность фильтрации в пределах заданного радиуса указанной 
географической точки. Например, выбрать все полигоны которые попадают в радиус 500 метров 
относительно точки с координатами [92.899501, 58.34302]


#### 3. Создать эндпоинт для сохранения географических объектов из `.gpx` файла.
Эндпоинт принимает в POST-запросе три поля:
- name - текстовое поле
- geom_type - текстовое поле, возможные значения: `Polygon`, `LineString`, `MultiPoint`
- gpx - файл с расширением `.gpx`

Для запросов с `geom_type`, имеющими значение `Polygon` или `LineString`, в БД должны создаваться
записи соответствующих сущностей.

Для запросов с `geom_type` = `MultiPoint` в БД должны создаться записи сущности "Point"
равное количеству точек в файле. Имена для них
должны генерироваться с увеличивающимся порядковым номером, присоединяясь к полученному полю `name`.

В ответе возвращается указанный ранее формат сущностей. В случаем с `MultiPoint` возвращается список сущностей.
```json
[
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        92.899501,
        58.34302
      ]
    },
    "properties": {
      "id": 1,
      "name": "Точка 1"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        93.899501,
        59.34302
      ]
    },
    "properties": {
      "id": 2,
      "name": "Точка 2"
    }
  },
  ...
]
```

#### 4. Подготовить docker и docker-compose файлы.
Проект должен запускаться одной командой `docker-compose up`

#### 5. Выполненное задание необходимо разместить в публичном репозитории на `github.com`. Прислать на него ссылку.


### Полезные ссылки
- https://docs.djangoproject.com/en/4.1/ref/contrib/gis/
- https://www.django-rest-framework.org/
- https://ru.wikipedia.org/wiki/GeoJSON
- https://geojson.tools/